# Cloudflare Worker config for OTA manifest server.
# See https://developers.cloudflare.com/workers/wrangler/configuration/

name = "ota-manifest"
main = "worker.ts"
compatibility_date = "2024-01-01"

# ─── R2 Bucket Binding ────────────────────────────────────────────────────────
# Create an R2 bucket first:  wrangler r2 bucket create ota-updates
#
# Uncomment and set your bucket name:
# [[r2_buckets]]
# binding = "OTA_BUCKET"
# bucket_name = "ota-updates"

# ─── Environment Variables ────────────────────────────────────────────────────
[vars]
OTA_PREFIX = ""

# If using external S3 instead of R2, set these:
# S3_ENDPOINT = "https://s3.us-east-1.amazonaws.com"
# S3_BUCKET   = "my-ota-bucket"

# For S3 credentials, use secrets (not vars):
#   wrangler secret put S3_ACCESS_KEY_ID
#   wrangler secret put S3_SECRET_ACCESS_KEY

# ─── Routes ───────────────────────────────────────────────────────────────────
# Uncomment to bind to a custom domain:
# routes = [
#   { pattern = "ota.example.com/api/manifest", zone_name = "example.com" }
# ]
